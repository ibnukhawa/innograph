<?xml version="1.0" encoding="utf-8"?>
<!--
    Part of Odoo Module Developed by 73lines
    See LICENSE file for full copyright and licensing details.
-->
<odoo>

    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Comparison">
        <xpath expr="." position="inside">
            <link type="text/less" rel='stylesheet' href='/website_product_comparison_73lines/static/src/less/comparison.less'/>
            <script type="text/javascript" src="/website_product_comparison_73lines/static/src/js/comparison.js"></script>
        </xpath>
    </template>

    <template id="add_to_compare_shortlist" inherit_id="website_sale.products_item" active="False" customize_show="True" name="Add to Compare">
        <xpath expr="//div[@class='product_price']" position="inside">
            <a class="btn btn-default btn-xs hidden-xs o_add_compare" title="Add to Compare" t-att-data-template-id="product.id" data-action="o_comparelist"><span class="fa fa-exchange"/></a>
        </xpath>
    </template>
    <!-- default compare before change header -->
    <!-- <template id="nav_compare_menu" inherit_id="website.layout" name="Nav compare Menu">
        <xpath expr="//ul[@id='top_menu']" position="inside">
            <li id="user_li"></li>
        </xpath>
    </template> -->

    <!-- new for bug fixing double header-->
    <!-- alfif  01-10-2019 -->

    <template id="nav_compare_menu_2" inherit_id="website_header.layout_header" name="Nav compare Menu">
        <xpath expr="//div[@class='navbar-header fixed-header collapse navbar-collapse']/div[@class='navbar-header-top']/div[@class='container']/nav[@class='navbar navbar-expand-lg navbar-light']/div[3]/div[1]" position="replace">
            <div class="container">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <ul class="navbar-nav">
                                                <li id="user_li"></li>
                                                <li class="dropdown" style="font-size:17px;padding-top:14px;color:black;">
                                                    <t t-call="website_header.product_carts"/>
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <div class="account-login col-sm-6">
                                            <div class="container">
                                                <div class="row">
                                                    <t t-if="not(website.user_id != user_id)">
                                                        <div class="navbar-account" style="padding-top:7px;">
                                                            <a href="/web/login" class="btn btn-xs btn-blue">Masuk</a>
                                                            <a href="/web/signup" class="btn btn-xs btn-red">Daftar</a>
                                                        </div>
                                                    </t>
                                                    <t t-if="website.user_id != user_id">
                                                        <div>
                                                            <ul class="navbar-nav">
                                                                <li style="color: white">
                                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"
                                                                        style="line-height:0px;padding:0px;">
                                                                        <t t-if="user_id.image">
                                                                            <span t-field="user_id.image_small" t-options='{"widget": "image", "class": "images"}' style="position:fixed;"/>
                                                                        </t>
                                                                        <t t-if="not user_id.image">
                                                                            <span align="left"/>
                                                                        </t>
                                                                        <label style="padding-top:15px;margin-bottom:0px;padding-left:45px;">
                                                                            <t t-esc="user_id.name" style="padding-top: 15px;"/>
                                                                        </label>
                                                                        <label style="font-weight: normal;margin-bottom:0px;padding-left:45px;">
                                                                            Customer
                                                                        </label>
                                                                        <ul class="dropdown-menu dropdown-account" role="menu">
                                                                            <li>
                                                                                <span class="item">
                                                                                    <span class="item-left">
                                                                                        <i class="fa fa-user" style="position:absolute;"></i>
                                                                                        <span class="item-info">
                                                                                            <a href="/my/home" t-if="website.user_id != user_id" style="padding:0px;padding-left:15px;">
                                                                                                My Account
                                                                                            </a>
                                                                                        </span>
                                                                                    </span>
                                                                                    <span class="item-right">
                                                                                    </span>
                                                                                </span>
                                                                            </li>
                                                                            <li>
                                                                                <span class="item">
                                                                                    <span class="item-left">
                                                                                        <i class="fa fa-heart-o"></i>
                                                                                        <span class="item-info">
                                                                                            <a href="/shop/product/whishlists">
                                                                                                Wishlist
                                                                                            </a>
                                                                                        </span>
                                                                                    </span>
                                                                                    <span class="item-right">
                                                                                    </span>
                                                                                </span>
                                                                            </li>
                                                                            <li>
                                                                                <span class="item">
                                                                                    <span class="item-left">
                                                                                        <i class="fa fa-sign-out"></i>
                                                                                        <span class="item-info">
                                                                                            <a t-attf-href="/web/session/logout?redirect=/" t-if="website.user_id != user_id">
                                                                                                Logout
                                                                                            </a>
                                                                                        </span>
                                                                                    </span>
                                                                                    <span class="item-right">
                                                                                    </span>
                                                                                </span>
                                                                            </li>
                                                                        </ul>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </t>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
        </xpath>
    </template>
    <!-- end -->
    
    <template id="product_add_to_compare" inherit_id="website_sale.product">
        <xpath expr="//a[@id='add_to_cart']" position="after">
            <t t-if="product.env.ref('website_product_comparison_73lines.add_to_compare_shortlist').active">
                <a class="btn btn-primary btn-lg mt8 hidden-xs o_add_compare" title="Add to Compare" t-att-data-template-id="product.id" data-action="o_comparelist"><span class="fa fa-exchange"/></a>
            </t>
        </xpath>
    </template>
    <template id="product_spec" name="Select Quantity">
        <div class="col-xs-12">
            <div class="panel panel-default">
                <div class="panel-heading o_specification_panel">
                    <h3 class="panel-title">
                        <b t-esc="att"/><i class="fa fa fa-chevron-right pull-right"/>
                    </h3>
                </div>
                <div class="panel-body o_specification_panel_body">
                    <table class="table table-bordered mb0">
                        <tbody>
                            <t t-foreach="atts[att]" t-as="attrib">
                                <tr>
                                    <td t-esc="attrib.attribute_id.name"/>
                                    <td>
                                        <t t-if="len(attrib.value_ids) == 1">
                                            <t t-esc="attrib.value_ids[0].name"/>
                                        </t>
                                        <t t-if="len(attrib.value_ids) > 1">
                                            <t t-esc="' or '.join(attrib.value_ids.mapped('name'))"/>
                                        </t>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </template>
 
    <template id="product_compare" name="Select Quantity">
        <t t-call="website.layout">
            <t t-set="additional_title">Shop</t>
            <div id="wrap" class="js_sale">
                <div class="oe_structure"/>
                <div class="container oe_website_sale">
                    <section class="container">
                        <!-- <h3 t-esc="'Compare ' + ' vs '.join([product.name for product in products])"/> -->
                        <h3>Product Comparison</h3>
                        <table class="table table-bordered text-center mt16">
                            <tr>
                                <td></td>
                                <td t-foreach="products" t-as="product">
                                    <a t-attf-href="/shop/compare/?products=#{','.join([str(id) for id in products._ids if id != product.id])}" t-att-data-template_id="product.id" class="o_comparelist_remove" t-if="len(products) > 2">
                                        <strong class='pull-right'>x</strong>
                                    </a>
                                    <a t-att-href="'/shop/product/%s' % slug(product)">
                                        <img t-attf-src="/web/image/product.template/#{product.id}/image/200x150" class="img img-responsive" style="margin:auto;"/>
                                    </a>
                                    <a class="o_product_comparision_table" t-attf-href="/shop/product/#{ slug(product) }">
                                        <span t-field='product.name'/><br/>
                                    </a>
                                    <strong>Price:</strong>
                                    <t t-if="(compute_currency(product.lst_price) - product.price) &gt; 0.1">
                                        <del class="text-danger">
                                            <strong><span t-field="product.lst_price" t-field-options='{"widget": "monetary","display_currency": website.pricelist_id.currency_id}'/></strong>
                                        </del>
                                    </t>
                                    <strong><span t-field="product.price" t-field-options='{"widget": "monetary","display_currency": website.pricelist_id.currency_id}'/></strong>
                                    <form action="/shop/cart/update" method="post" class="text-center">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <input name="product_id" t-att-value="product.product_variant_ids[0].id" type="hidden"/>
                                        <a class="btn btn-primary btn-xs fa fa-shopping-cart a-submit">&amp;nbsp;Add to cart</a>
                                    </form>
                                </td>
                            </tr>
                        </table>
                        <table class="table table-bordered table-hover text-center" id="o_comparelist_table">
                            <t t-foreach="specs.keys()" t-as="spec">
                                <tr class="text-left breadcrumb clickable" data-toggle="collapse" t-att-data-target="'.'+spec.split()[0]">
                                    <th t-att-colspan="len(products) + 1"><i class="fa fa-chevron-down o_product_comparision_collpase"/><t t-esc="spec"/></th>
                                </tr>
                                <tr t-foreach="specs[spec].keys()" t-as="att" t-att-class="'collapse in ' + spec.split()[0]">
                                    <td t-esc="att"/>
                                    <td t-foreach="specs[spec][att]" t-as="val"><t t-esc="val"/></td>
                                </tr>
                            </t>
                        </table>
                    </section>
                </div>
            </div>
        </t>
    </template>

</odoo>
